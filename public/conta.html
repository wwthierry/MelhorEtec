<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tela de Perfil - Vermelho Escuro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="assets/style/css/config.css">
</head>

<body>

    <a href="menu.html" class="voltar-menu" id="backButton">
        <i class="fas fa-home"></i>
        <span>Voltar ao menu</span>
    </a>

    <div class="profile-container">

        <div class="profile-pic" id="profilePic">
            <span id="profileIcon" style="display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; font-size: 2em; font-weight: bold;">U</span>
            <span class="edit-icon" id="editIcon">
                <i class="fas fa-pencil-alt"></i>
            </span>
        </div>
        <input type="file" id="fileInput" accept="image/*" style="display: none;">

        <div class="welcome-text">
            Bem vindo, <p><strong id="loggedUserFName">Usuário</strong>!</p>
        </div>
        
        <div class="input-group">
            <input type="text" id="nameInput" value="Carregando Nome...">
        </div>

        <div class="input-group">
            <input type="password" value="***********" id="passwordInput">
            <span class="password-toggle" id="passwordToggle">
                <i class="fas fa-eye-slash" id="passwordToggleIcon"></i>
            </span>
        </div>

        <div class="input-group">
            <input type="email" id="emailInput" value="Carregando Email..." readonly>
        </div>

        <button class="save-button" id="saveButton">Salvar</button>
        
        <button id="signOutButton" class="signout-btn">Sair</button>

    </div>

    <script type="module" src="assets/style/js/firebaseauth.js"></script> 
    <script type="module" src="assets/style/js/conta.js"></script> 

    <script>
        // Lógica de UI (não Firebase)
        document.addEventListener('DOMContentLoaded', () => {
            const passwordInput = document.getElementById('passwordInput');
            const passwordToggle = document.getElementById('passwordToggle');
            const passwordToggleIcon = document.getElementById('passwordToggleIcon');
            const editIcon = document.getElementById('editIcon');
            const fileInput = document.getElementById('fileInput');
    
            // --- CORREÇÃO: Exibir senha por padrão ao carregar ---
            if (passwordInput && passwordToggleIcon) {
                // 1. Altera o tipo do input para 'text' (exibir a senha)
                passwordInput.type = 'text';
                // 2. Altera o ícone para o olho aberto
                passwordToggleIcon.classList.replace('fa-eye-slash', 'fa-eye');
            }
            // --------------------------------------------------------
    
            // Abrir o seletor de arquivo ao clicar no ícone de editar
            if (editIcon && fileInput) {
                editIcon.addEventListener('click', () => {
                    fileInput.click();
                });
            }
    
            // Lógica de UI para mostrar/ocultar senha (agora funcionando como um TOGGLE)
            if (passwordToggle && passwordInput && passwordToggleIcon) {
                passwordToggle.addEventListener('click', () => {
                    const isPassword = passwordInput.type === 'password';
                    if (isPassword) {
                        passwordInput.type = 'text';
                        passwordToggleIcon.classList.replace('fa-eye-slash', 'fa-eye');
                    } else {
                        passwordInput.type = 'password';
                        passwordToggleIcon.classList.replace('fa-eye', 'fa-eye-slash');
                    }
                });
            }
        });
    </script>
     <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
     <script>
         new window.VLibras.Widget('https://vlibras.gov.br/app');
     </script>
</body>

</html>